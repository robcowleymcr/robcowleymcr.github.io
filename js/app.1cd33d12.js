(function(e){function t(t){for(var r,c,o=t[0],a=t[1],s=t[2],f=0,p=[];f<o.length;f++)c=o[f],i[c]&&p.push(i[c][0]),i[c]=0;for(r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r]);l&&l(t);while(p.length)p.shift()();return u.push.apply(u,s||[]),n()}function n(){for(var e,t=0;t<u.length;t++){for(var n=u[t],r=!0,o=1;o<n.length;o++){var a=n[o];0!==i[a]&&(r=!1)}r&&(u.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},i={app:0},u=[];function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var s=0;s<o.length;s++)t(o[s]);var l=a;u.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._l(e.grid,function(t,r){return n("lane",{key:r,attrs:{name:t.name,object:t,index:r},on:{play:e.playSnd}})}),n("div",{staticClass:"buttons"},[n("div",{staticClass:"btn__primary",class:{active:e.sequencePlaying},on:{click:function(t){return e.playClickHandler()}}},[e._v("Play")]),n("div",{staticClass:"btn__primary",on:{click:function(t){return e.stopClickHandler()}}},[e._v("Stop")]),n("div",{staticClass:"btn__primary",on:{click:function(t){return e.resetClickHandler()}}},[e._v("Reset")])])],2)},u=[],c=(n("96cf"),n("3b8d")),o=n("cebc"),a=n("2f62"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"lane"},[n("div",{staticClass:"lane__name"},[e._v(e._s(e.name))]),e._l(e.array,function(t,r){return n("step",{key:r,attrs:{number:r+1,"lane-name":e.name,"lane-number":e.$attrs.index},on:{play:e.playSnd}})})],2)},l=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"step",class:e.classObject,on:{click:e.clickHandler}},[e._v("\n    "+e._s(e.number)+"\n")])},p=[],h=(n("c5f6"),{name:"Step",data:function(){return{active:!1}},props:{number:Number,laneName:String,laneNumber:Number},computed:Object(o["a"])({},Object(a["c"])({counter:function(e){return e.counter},grid:function(e){return e.grid}}),{isCurrentStep:function(){return this.counter+1===this.number},classObject:function(){return{active:this.grid[this.laneNumber].sequence[this.number-1],current:this.isCurrentStep}},playSound:function(){return this.classObject.active&&this.classObject.current}}),watch:{playSound:function(){this.playSound&&this.$emit("play",this.laneNumber)}},methods:Object(o["a"])({},Object(a["b"])(["toggleStep"]),{clickHandler:function(e){this.active?this.active=!1:this.active=!0,this.$store.dispatch("toggleStep",{stepNumber:this.number,lane:this.laneNumber})}})}),d=h,m=(n("9707"),n("2877")),b=Object(m["a"])(d,f,p,!1,null,"a2cb867e",null),v=b.exports,g={name:"Lane",props:{name:String},computed:Object(o["a"])({},Object(a["c"])({grid:function(e){return e.grid}}),{array:function(){return this.grid[this.$vnode.key].sequence}}),methods:{playSnd:function(e){this.$emit("play",e)}},components:{Step:v}},y=g,S=(n("b7d2"),Object(m["a"])(y,s,l,!1,null,"15470473",null)),x=S.exports,w=n("5118"),j=(n("ac6a"),n("d225")),O=n("b0b4"),q=function(){function e(t,n){Object(j["a"])(this,e),this.context=t,this.urls=n,this.buffer=[]}return Object(O["a"])(e,[{key:"loadSound",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=new XMLHttpRequest,r.open("get",t,!0),r.responseType="arraybuffer",i=this,r.onload=function(){i.context.decodeAudioData(r.response,function(e){i.buffer[n]=e})},r.send();case 6:case"end":return e.stop()}},e,this)}));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"loadAll",value:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.urls.forEach(function(e,n){t.loadSound(e,n)});case 1:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},{key:"getSoundByIndex",value:function(e){return this.buffer[e]}}]),e}(),k=function(){function e(t,n){Object(j["a"])(this,e),this.context=t,this.buffer=n}return Object(O["a"])(e,[{key:"init",value:function(){this.gainNode=this.context.createGain(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.gainNode),this.gainNode.connect(this.context.destination)}},{key:"play",value:function(){this.init(),this.source.start(this.context.currentTime)}},{key:"stop",value:function(){this.gainNode.gain.exponentialRampToValueAtTime(.001,this.context.currentTime+.5),this.source.stop(this.context.currentTime+.5)}}]),e}(),_=function(){var e=window.AudioContext||window.webkitAudioContext,t=new e;return t},C={name:"app",data:function(){return{stopSequence:!1,sequencePlaying:!1,context:null,buffer:null}},components:{Lane:x},computed:Object(o["a"])({},Object(a["c"])({grid:function(e){return e.grid}}),{soundUrls:function(){return this.grid.map(function(e){return e.url})}}),methods:{playClickHandler:function(){this.sequencePlaying||(this.sequencePlaying=!0,this.timeoutIterator())},stopClickHandler:function(){this.sequencePlaying||this.stopSequence?this.sequencePlaying&&(this.stopSequence=!0):this.$store.dispatch("resetCounter")},resetClickHandler:function(){this.$store.dispatch("resetSequence")},timeoutIterator:function(){this.sequencePlaying&&!this.stopSequence?(this.$store.dispatch("incrementCounter"),Object(w["setTimeout"])(this.timeoutIterator,120)):(this.stopSequence=!1,this.sequencePlaying=!1)},playSnd:function(e){var t=new k(this.context,this.buffer.getSoundByIndex(e));t.play()}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.context=_(),this.buffer=new q(this.context,this.soundUrls),e.next=4,this.buffer.loadAll();case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()},P=C,N=(n("5c0b"),Object(m["a"])(P,i,u,!1,null,null,null)),$=N.exports,R=n("f499"),H=n.n(R);r["a"].use(a["a"]);var T=new a["a"].Store({state:{grid:[{name:"Snare",sequence:[null,null,!1,null,!0,null,null,null,null,!1,null,null,!0,null,null,null],url:"./wav/snare.wav"},{name:"Kick",sequence:[!0,null,null,null,null,null,!0,null,!1,null,!1,!1,null,!1,null,null],url:"./wav/kick.wav"},{name:"Hat",sequence:[!0,null,!0,!1,!0,null,!0,!1,!0,null,!0,!1,!0,!1,!0,!0],url:"./wav/hat.wav"}],json:Object,counter:0,sequenceLength:16,playSequence:!1,stepInterval:200},mutations:{toggleStep:function(e,t){e.grid[t.lane].sequence[t.stepNumber-1]=!e.grid[t.lane].sequence[t.stepNumber-1],e.grid=JSON.parse(H()(e.grid))},incrementCounter:function(e){15===e.counter?e.counter=0:e.counter++},togglePlaySequence:function(e){e.playSequence=!e.playSequence},resetSequence:function(e){e.grid.forEach(function(e){e.sequence=Array(16)})},resetCounter:function(e){e.counter=0}},actions:{toggleStep:function(e,t){e.context;this.commit("toggleStep",t)},incrementCounter:function(e){e.context;this.commit("incrementCounter")},playSequence:function(e){e.context;this.commit("togglePlaySequence")},loadSounds:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:t.context,this.commit("initJsonObject");case 2:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),resetSequence:function(e){e.context;this.commit("resetSequence")},resetCounter:function(e){e.context;this.commit("resetCounter")}}});r["a"].config.productionTip=!1,new r["a"]({store:T,render:function(e){return e($)}}).$mount("#app")},"5c0b":function(e,t,n){"use strict";var r=n("5e27"),i=n.n(r);i.a},"5e27":function(e,t,n){},9248:function(e,t,n){},9707:function(e,t,n){"use strict";var r=n("9248"),i=n.n(r);i.a},b665:function(e,t,n){},b7d2:function(e,t,n){"use strict";var r=n("b665"),i=n.n(r);i.a}});
//# sourceMappingURL=app.1cd33d12.js.map